---
wave: 1
depends_on: []
files_modified:
  - src/modules/FunctionalEarTraining/components/levels/SecondaryDominantsLevel.tsx
autonomous: true
---

# Plan: 02-01 Implement Secondary Dominants Level

Create a new ear training level dedicated to identifying secondary dominants (V/ii, V/V, etc.).

## Tasks

<task id="component-creation">
Create `src/modules/FunctionalEarTraining/components/levels/SecondaryDominantsLevel.tsx`.
- Use a similar structure to `TendencyLevel.tsx`.
- Implement a functional exercise loop:
  1. Play a tonic cadence (I-IV-V-I).
  2. Play a random secondary dominant (e.g., A7 in C major).
  3. Optionally play the resolution chord (e.g., Dm).
  4. Provide options like "V/ii", "V/V", "V/vi", etc.
</task>

<task id="theory-integration">
Integrate with `theoryEngine.ts`:
- Use `getSecondaryDominants(tonic)` to fetch valid options.
- Use `getFunctionalNoteName` with the correct `chordContext` for enharmonic correctness in playback.
</task>

<task id="midi-support">
Add MIDI input support:
- Detect played chords from the MIDI keyboard.
- Compare the played notes against the expected secondary dominant notes.
</task>

## Verification
- Can successfully start a round.
- Auditory feedback matches the functional labels.
- Correct answers award points and increment streak.
- MIDI input correctly identifies the chord.
